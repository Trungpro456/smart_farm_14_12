<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hệ thống giám sát nông nghiệp</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center">
  <div class="container mx-auto p-6 text-center">

    <h1 class="text-3xl font-bold text-green-600 mb-8 flex items-center justify-center gap-2">
      🌱 Hệ thống giám sát nông nghiệp
    </h1>

    <!-- ================= GRID 4 VƯỜN ================= -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10 justify-items-center">

      <!-- Vườn 1 -->
      <div class="bg-white shadow-lg rounded-2xl p-6 flex flex-col items-center w-64 transition hover:scale-105">
        <h2 class="text-lg font-semibold text-gray-700 mb-2">🏡 Vườn 1</h2>
        <div class="flex-1 flex flex-col justify-center items-center space-y-3">
          <div><span class="block text-gray-500 text-sm">Nhiệt độ</span>
            <span id="temp-1" class="text-2xl font-bold text-red-500">--</span>
          </div>
          <div><span class="block text-gray-500 text-sm">Độ ẩm</span>
            <span id="hum-1" class="text-2xl font-bold text-blue-500">--</span>
          </div>
        </div>
        <div class="text-center text-sm text-gray-600 mt-2" id="time-1">--</div>
      </div>

      <!-- Vườn 2 -->
      <div class="bg-white shadow-lg rounded-2xl p-6 flex flex-col items-center w-64 transition hover:scale-105">
        <h2 class="text-lg font-semibold text-gray-700 mb-2">🏡 Vườn 2</h2>
        <div class="flex-1 flex flex-col justify-center items-center space-y-3">
          <div><span class="block text-gray-500 text-sm">Nhiệt độ</span>
            <span id="temp-2" class="text-2xl font-bold text-red-500">--</span>
          </div>
          <div><span class="block text-gray-500 text-sm">Độ ẩm</span>
            <span id="hum-2" class="text-2xl font-bold text-blue-500">--</span>
          </div>
        </div>
        <div class="text-center text-sm text-gray-600 mt-2" id="time-2">--</div>
      </div>

      <!-- Vườn 3 -->
      <div class="bg-white shadow-lg rounded-2xl p-6 flex flex-col items-center w-64 transition hover:scale-105">
        <h2 class="text-lg font-semibold text-gray-700 mb-2">🏡 Vườn 3</h2>
        <div class="flex-1 flex flex-col justify-center items-center space-y-3">
          <div><span class="block text-gray-500 text-sm">Nhiệt độ</span>
            <span id="temp-3" class="text-2xl font-bold text-red-500">--</span>
          </div>
          <div><span class="block text-gray-500 text-sm">Độ ẩm</span>
            <span id="hum-3" class="text-2xl font-bold text-blue-500">--</span>
          </div>
        </div>
        <div class="text-center text-sm text-gray-600 mt-2" id="time-3">--</div>
      </div>

      <!-- Vườn 4 -->
      <div class="bg-white shadow-lg rounded-2xl p-6 flex flex-col items-center w-64 transition hover:scale-105">
        <h2 class="text-lg font-semibold text-gray-700 mb-2">🏡 Vườn 4</h2>
        <div class="flex-1 flex flex-col justify-center items-center space-y-3">
          <div><span class="block text-gray-500 text-sm">Nhiệt độ</span>
            <span id="temp-4" class="text-2xl font-bold text-red-500">--</span>
          </div>
          <div><span class="block text-gray-500 text-sm">Độ ẩm</span>
            <span id="hum-4" class="text-2xl font-bold text-blue-500">--</span>
          </div>
        </div>
        <div class="text-center text-sm text-gray-600 mt-2" id="time-4">--</div>
      </div>

    </div>
    <!-- ================= END GRID ================= -->

    <!-- PANEL CẢM BIẾN ĐẤT -->
    <h2 class="text-2xl font-bold text-green-700 mb-4">🌾 Cảm biến đất (RS485)</h2>
    <div class="bg-white shadow-lg rounded-2xl p-6 w-full max-w-md mx-auto mb-10">
      <div class="flex flex-col items-center space-y-4">
        <div>
          <span class="block text-gray-500 text-sm">🌡️ Nhiệt độ đất</span>
          <span id="soil-temp" class="text-2xl font-bold text-red-500">-- °C</span>
        </div>
        <div>
          <span class="block text-gray-500 text-sm">💧 Độ ẩm đất</span>
          <span id="soil-hum" class="text-2xl font-bold text-blue-500">-- %</span>
        </div>
        <div>
          <span class="block text-gray-500 text-sm">⚡ Độ dẫn điện (EC)</span>
          <span id="soil-ec" class="text-2xl font-bold text-green-600">-- µS/cm</span>
        </div>
        <div class="text-sm text-gray-600" id="soil-time">--</div>
      </div>
    </div>

    <!-- ================== BƠM ================== -->
    <h2 class="text-2xl font-bold text-green-700 mb-4">💧 Điều khiển Bơm</h2>
    <div class="flex flex-wrap justify-center gap-4 mb-10">
      <button id="btn1"
        class="relay-btn bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-full shadow-md transition"
        data-relay="1" data-state="off">🚿 Bật Bơm 1</button>
      <button id="btn2"
        class="relay-btn bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-full shadow-md transition"
        data-relay="2" data-state="off">🚿 Bật Bơm 2</button>
      <button id="btn3"
        class="relay-btn bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-full shadow-md transition"
        data-relay="3" data-state="off">🚿 Bật Bơm 3</button>
      <button id="btn4"
        class="relay-btn bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-full shadow-md transition"
        data-relay="4" data-state="off">🚿 Bật Bơm 4</button>
    </div>

    <!-- ================== PANEL AI ================== -->
    <h2 class="text-2xl font-bold text-purple-700 mb-4">🤖 AI Gợi ý tưới cây</h2>

    <div class="bg-white shadow-lg rounded-2xl p-6 w-full max-w-md mx-auto mb-10">
      <div class="flex flex-col items-center space-y-4">

        <div>
          <span class="block text-gray-500 text-sm">📌 Kết luận</span>
          <span id="ai-result" class="text-2xl font-bold text-purple-600">--</span>
        </div>

        <div>
          <span class="block text-gray-500 text-sm">📈 Độ tin cậy</span>
          <span id="ai-confidence" class="text-xl font-semibold text-gray-700">--</span>
        </div>

        <button id="btn-ai-refresh"
          class="bg-purple-500 hover:bg-purple-600 text-white font-semibold px-6 py-3 rounded-full shadow-md transition">
          🔄 Làm mới dự đoán AI
        </button>

      </div>
    </div>

    <!-- ================== HISTORY ================== -->
    <div class="text-center">
      <a href="/history"
        class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full shadow-md transition">
        📊 Xem lịch sử & biểu đồ
      </a>
    </div>

  </div>

  <script src="/static/script.js"></script>
</body>

</html>